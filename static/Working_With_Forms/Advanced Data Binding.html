<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Advanced Data Binding - NestedReact</title>
    <meta name="description" content="React. Playing well with traditional MVC." />
    <meta name="author" content="Vlad Balin">
    <meta charset="UTF-8">
    <link rel="icon" href="../themes/daux/img/favicon-navy.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../themes/daux/css/theme-navy.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="with-float">
    
<header class="Navbar hidden-print">
    <a class="Navbar__brand" href="../index.html">NestedReact</a>

    <div class="Search">
        <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451"><path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/></svg>
        <input type="search" id="tipue_search_input" class="Search__field" placeholder="Search..." autocomplete="on" results=25 autosave=text_search>
    </div>
</header>
<div class="Columns content">
    <aside class="Columns__left Collapsible">
        <div class="Collapsible__container">
            <button type="button" class="Button Collapsible__trigger">
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
            </button>
        </div>

        <div class="Collapsible__content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item '><a href="../Getting_Started.html">Getting Started</a></li><li class='Nav__item  has-children'><a href="../Basics/State_Management_101.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Basics</a><ul class='Nav'><li class='Nav__item '><a href="../Basics/State_Management_101.html">State Management 101</a></li><li class='Nav__item '><a href="../Basics/Two_way_data_binding.html">Two way data binding</a></li></ul></li><li class='Nav__item  has-children'><a href="../Handling_The_Complex_State/Dirty_Top_And_Pure_Bottom .html" class="folder"><i class="Nav__arrow">&nbsp;</i>Handling The Complex State</a><ul class='Nav'><li class='Nav__item '><a href="../Handling_The_Complex_State/Dirty_Top_And_Pure_Bottom .html">Dirty Top And Pure Bottom </a></li><li class='Nav__item '><a href="../Handling_The_Complex_State/State_and_Props_Type_Annotations.html">State and Props Type Annotations</a></li><li class='Nav__item '><a href="../Handling_The_Complex_State/Update_Watchers_and_Transactions.html">Update Watchers and Transactions</a></li><li class='Nav__item '><a href="../Handling_The_Complex_State/Ownership_and_Shared_References.html">Ownership and Shared References</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="../Working_With_Forms/Form_Validation.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Working With Forms</a><ul class='Nav'><li class='Nav__item '><a href="../Working_With_Forms/Form_Validation.html">Form Validation</a></li><li class='Nav__item Nav__item--active'><a href="../Working_With_Forms/Advanced Data Binding.html">Advanced Data Binding</a></li></ul></li><li class='Nav__item '><a href="../Optimizing_For_Performance.html">Optimizing For Performance</a></li><li class='Nav__item '><a href="../Migration_from_Backbone.html">Migration from Backbone</a></li><li class='Nav__item '><a href="../Using jQuery plugins.html">Using jQuery plugins</a></li></ul>

            <div class="Links">
                                    <hr/>
                                            <a href="https://github.com/Volicon/NestedReact/issues" target="_blank">Help/Support/Bugs</a>
                        <br />
                                            <a href="http://volicon.com" target="_blank">Made by Volicon (a Verizon company)</a>
                        <br />
                                    
                                    <div class="CodeToggler">
                        <hr/>
                                                    <span class="CodeToggler__text">Code blocks</span>
                            <div class="ButtonGroup" role="group">
                                <button class="Button Button--default Button--small CodeToggler__button CodeToggler__button--hide">No</button>
                                <button class="Button Button--default Button--small CodeToggler__button CodeToggler__button--below">Below</button>
                                <button class="Button Button--default Button--small CodeToggler__button CodeToggler__button--float">Inline</button>
                            </div>
                                            </div>
                
                                    <hr/>
                    <div class="Twitter">
                                                    <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=gaperton&amp;show_count=false"></iframe>
                            <br />
                            <br />
                                            </div>
                            </div>
        </div>
    </aside>
    <div class="Columns__right Columns__right--float">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="../Working_With_Forms/Form_Validation.html">Working With Forms</a> <svg class="Page__header--separator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.175 477.175"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"/></svg> <a href="../Working_With_Forms/Advanced Data Binding.html">Advanced Data Binding</a></h1>
                <span style="float: left; font-size: 10px; color: gray;">
            Tuesday, August 2, 2016 9:44 AM        </span>
                        <span style="float: right; font-size: 10px; color: gray;">
            <a href="https://github.com/Volicon/NestedReact/blob/develop/docs/03_Working_With_Forms\Advanced Data Binding.md" target="_blank">Edit on GitHub</a>
        </span>
            </div>


    <div class="s-content">
        <h1 id="page_Data_binding_examples">Data binding examples</h1>
<p>Here are the set of examples for typical <code>nestedreact</code> data binding use cases.</p>
<p>Each section contains custom databound component, model definitions, and usage examples.</p>
<p>Somewhere at the top level component(s) there must be the declaration linking model updates to UI. Either models must be (nested) members of some component's state (which will update UI even in case of deep changes), or you may link component updates to changes of models and collections passed in props. In the last case, you will need to add following line to top or middle-level component definition:</p>
<pre><code>    listenToProps : 'myModel myCollection'
</code></pre>
<p>It's generally advised to keep stateful components at the top level, and use <code>listenToProps</code> in the middle level for optimization purposes if you want local updates. Keep you bottom-level components pure, and try to do the same for the most of your middle level (<code>listenToProps</code> used wisely won't hurt). For further information on this topic consult the top-level guide.</p>
<h2 id="page_Link_transformations">Link transformations</h2>
<p>Attribute's link can be further transformed using extended link API. Link transformations allowing you to use new <code>stateless functions</code> component definition style introduced in React 0.14 in most cases.</p>
<p>For links with any value type:</p>
<ul>
<li>
<code>link.equals( x )</code> creates boolean link which is true whenever link value is equal to x. Useful for radio groups.</li>
<li>
<code>link.update( x =&gt; !x )</code> creates function transforming link value (toggling boolean value in this case). Useful for <code>onClick</code> event handlers.</li>
</ul>
<p>For link enclosing array:</p>
<ul>
<li>
<code>arrLink.contains( x )</code> creates boolean link which is true whenever x is contained in an array in link value. Useful for checkboxes. Avoid long arrays, currently operations has O(N^2) complexity.</li>
</ul>
<h2 id="page_Checkboxes">Checkboxes</h2>
<p>Standard <code>&lt;input/&gt;</code> will work. Custom Checkbox component might be implemented like this:</p>
<pre><code class="language-javascript">const Checkbox = ({ className = 'checkbox', checkedLink }) =&gt; (
    &lt;div className={ className + ( checkedLink.value ? ' selected' : '' ) }
         onClick = { checkedLink.update( x =&gt; !x ) }
    /&gt;
);
</code></pre>
<p>Examples will assume working with custom Checkbox.</p>
<h3 id="page_Binding_to_boolean_model_attributes">Binding to boolean model attributes</h3>
<pre><code class="language-javascript">import { Model } from 'nestedtypes'

const MyModel = Model
    .defaults({
        option1 : true,
        option2 : false
    });
    
const CheckboxGroup = ({ model /* instanceof MyModel */ }) =&gt; (
    &lt;div&gt;
        &lt;div&gt;
            &lt;Checkbox checkedLink={ model.getLink( 'option1' ) } /&gt;
            Option 1
        &lt;/div&gt;
        &lt;div&gt;
            &lt;Checkbox checkedLink={ model.getLink( 'option2' ) } /&gt;
            Option 2
        &lt;/div&gt;
    &lt;/div&gt;
);
</code></pre>
<h3 id="page_Binding_to_array_of_selected_options">Binding to array of selected options</h3>
<pre><code class="language-javascript">import { Model } from 'nestedtypes'

const MyModel = Model
    .defaults({
        options : [ 'option1' ]
    });
    
const CheckboxGroup = ({ model /* instanceof MyModel */ }) =&gt; {
    const link = model.getLink( 'options' );
    
    return (
        &lt;div&gt;
            &lt;div&gt;
                &lt;Checkbox checkedLink={ link.contains( 'option1' ) } /&gt;
                Option 1
            &lt;/div&gt;
            &lt;div&gt;
                &lt;Checkbox checkedLink={ link.contains( 'option2' ) } /&gt;
                Option 2
            &lt;/div&gt;
        &lt;/div&gt;
    );
};
</code></pre>
<h3 id="page_Binding_to_collection_of_selected_models">Binding to collection of selected models</h3>
<pre><code class="language-javascript">import { Model } from 'nestedtypes'

const MyModel = Model
    .defaults({
        all : Some.Collection,
        selected : Collection.subsetOf( 'all' )
    });
    
const CheckboxGroup = ({ model /* instanceof MyModel */ }) =&gt; {
    const { all, selected } = model;
    
    return (
        &lt;div&gt;
            { all.map( model =&gt; (
                &lt;div&gt;
                    &lt;Checkbox checkedLink={ selected.getLink( model ) } /&gt;
                    { model.displayName }
                &lt;/div&gt;
            ))}
        &lt;/div&gt;
    );
};
</code></pre>
<h2 id="page_Radio_Groups">Radio Groups</h2>
<p>For the radio groups you will need custom Radio component. It's very similar to custom Checkbox one,
with one difference in click handler:</p>
<pre><code class="language-javascript">const Radio = ({ className = 'radio', checkedLink }) =&gt; (
    &lt;div className={ className + ( checkedLink.value ? ' selected' : '' ) }
         onClick = { checkedLink.update( () =&gt; true ) }
    /&gt;
);
</code></pre>
<p>In this example, we bind radio to string values. It's not required for them to be strings.</p>
<pre><code class="language-javascript">import { Model } from 'nestedtypes'

const MyModel = Model
    .defaults({
        option : 'option1'
    });
    
const RadioGroup = ({ model /* instanceof MyModel */ }) =&gt; {
    const link = model.getLink( 'option' );
    
    return (
        &lt;div&gt;
            &lt;div&gt;
                &lt;Radio checkedLink={ link.equals( 'option1' ) } /&gt;
                Option 1
            &lt;/div&gt;
            &lt;div&gt;
                &lt;Radio checkedLink={ link.equals( 'option2' ) } /&gt;
                Option 2
            &lt;/div&gt;
        &lt;/div&gt;
    );
};
</code></pre>
<h2 id="page_Input_fields">Input fields</h2>
<p>Standard <code>&lt;input&gt;</code> will work. You may implement custom input controls to handle complex scenarios
with validation and appearance.</p>
<pre><code class="language-javascript">const Input = ({ valueLink, className, ...props }) =&gt; (
    &lt;div className='wrapping'
        &lt;input className={ className + ( valieLink.error ? ' error' : '' ) } {...props} value={ valueLink.value } onChange={ e =&gt; valueLink.set( e.target.value ) }/&gt;
    &lt;/div&gt;
);
</code></pre>
<p>Errors are attached to the links automatically, when model validation is failed. Validation checks can be attached to model attributes with <code>.has.check</code> specification. <code>x : Number.has.check( x =&gt; x &gt; 0 )</code>, <code>y : Number.has.check( x =&gt; x &lt; 0, 'y should be negative' )</code>.</p>
<h3 id="page_Binding_to_model_attributes">Binding to model attributes</h3>
<pre><code class="language-javascript">import { Model } from 'nestedtypes'

const MyModel = Model
    .defaults({
        number : 0,
        string : ''
    });
    
const InputGroup = ({ model /* instanceof MyModel */ }) =&gt; (
        &lt;div&gt;
            &lt;label&gt;
                Number: 
                &lt;input type='number' valueLink={ model.getLink( 'number' ) } /&gt;
            &lt;/label&gt;
            &lt;label&gt;
                String: 
                &lt;input valueLink={ model.getLink( 'string' ) } /&gt;
            &lt;/label&gt;
        &lt;/div&gt;
    );
};
</code></pre>
<h3 id="page_Binding_to_an_array_of_strings">Binding to an array of strings</h3>
<p>The same technique may be used to bind to an array or hash of strings. First, take a link to this
attribute. Next, use <code>link.map</code> method to iterate through elements links created for you.</p>
<p><code>link.map</code> will internally execute <code>link.at( key )</code> method to create a link to the plain object or array element.
These methods may be used manually to create binding for the structures of any particular depth and complexity.</p>
<p>However, for the JS data with known structure it's recommended to wrap them in models.</p>
<pre><code class="language-javascript">import { Model } from 'nestedtypes'

const MyModel = Model
    .defaults({
        strings : [ 'first', 'second' ]
    });
    
const InputGroup = ({ model /* instanceof MyModel */ }) =&gt; (
        &lt;div&gt;
            { model.getLink( 'strings' ).map( strLink =&gt; (
                &lt;div&gt;
                    &lt;input type='number' valueLink={ strLink } /&gt;
                &lt;/div&gt;
            )) }
        &lt;/div&gt;
    );
};
</code></pre>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../Working_With_Forms/Form_Validation.html">Previous</a></li>            <li class=Pager--next><a href="../Optimizing_For_Performance.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    
    <!-- jQuery -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../themes/daux/js/daux.js"></script>

            <!-- Tipue Search -->
        <script type="text/javascript" src="../tipuesearch/tipuesearch.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(function() {
                tipuesearch({
                    'base_url': '../'
                });
            });
        </script>
    
</body>
</html>
