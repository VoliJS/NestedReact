<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Optimizing For Performance - NestedReact</title>
    <meta name="description" content="React. Playing well with traditional MVC." />
    <meta name="author" content="Vlad Balin">
    <meta charset="UTF-8">
    <link rel="icon" href="themes/daux/img/favicon-navy.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='themes/daux/css/theme-navy.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="with-float">
    
<header class="Navbar hidden-print">
    <a class="Navbar__brand" href="index.html">NestedReact</a>

    <div class="Search">
        <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451"><path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/></svg>
        <input type="search" id="tipue_search_input" class="Search__field" placeholder="Search..." autocomplete="on" results=25 autosave=text_search>
    </div>
</header>
<div class="Columns content">
    <aside class="Columns__left Collapsible">
        <div class="Collapsible__container">
            <button type="button" class="Button Collapsible__trigger">
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
            </button>
        </div>

        <div class="Collapsible__content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item '><a href="Getting_Started.html">Getting Started</a></li><li class='Nav__item  has-children'><a href="Basics/State_Management_101.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Basics</a><ul class='Nav'><li class='Nav__item '><a href="Basics/State_Management_101.html">State Management 101</a></li><li class='Nav__item '><a href="Basics/Two_way_data_binding.html">Two way data binding</a></li></ul></li><li class='Nav__item  has-children'><a href="Handling_The_Complex_State/Dirty_Top_And_Pure_Bottom .html" class="folder"><i class="Nav__arrow">&nbsp;</i>Handling The Complex State</a><ul class='Nav'><li class='Nav__item '><a href="Handling_The_Complex_State/Dirty_Top_And_Pure_Bottom .html">Dirty Top And Pure Bottom </a></li><li class='Nav__item '><a href="Handling_The_Complex_State/State_and_Props_Type_Annotations.html">State and Props Type Annotations</a></li><li class='Nav__item '><a href="Handling_The_Complex_State/Update_Watchers_and_Transactions.html">Update Watchers and Transactions</a></li><li class='Nav__item '><a href="Handling_The_Complex_State/Ownership_and_Shared_References.html">Ownership and Shared References</a></li></ul></li><li class='Nav__item  has-children'><a href="Working_With_Forms/Form_Validation.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Working With Forms</a><ul class='Nav'><li class='Nav__item '><a href="Working_With_Forms/Form_Validation.html">Form Validation</a></li><li class='Nav__item '><a href="Working_With_Forms/Advanced Data Binding.html">Advanced Data Binding</a></li></ul></li><li class='Nav__item Nav__item--active'><a href="Optimizing_For_Performance.html">Optimizing For Performance</a></li><li class='Nav__item '><a href="Migration_from_Backbone.html">Migration from Backbone</a></li><li class='Nav__item '><a href="Using jQuery plugins.html">Using jQuery plugins</a></li></ul>

            <div class="Links">
                                    <hr/>
                                            <a href="https://github.com/Volicon/NestedReact/issues" target="_blank">Help/Support/Bugs</a>
                        <br />
                                            <a href="http://volicon.com" target="_blank">Made by Volicon (a Verizon company)</a>
                        <br />
                                    
                                    <div class="CodeToggler">
                        <hr/>
                                                    <span class="CodeToggler__text">Code blocks</span>
                            <div class="ButtonGroup" role="group">
                                <button class="Button Button--default Button--small CodeToggler__button CodeToggler__button--hide">No</button>
                                <button class="Button Button--default Button--small CodeToggler__button CodeToggler__button--below">Below</button>
                                <button class="Button Button--default Button--small CodeToggler__button CodeToggler__button--float">Inline</button>
                            </div>
                                            </div>
                
                                    <hr/>
                    <div class="Twitter">
                                                    <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=gaperton&amp;show_count=false"></iframe>
                            <br />
                            <br />
                                            </div>
                            </div>
        </div>
    </aside>
    <div class="Columns__right Columns__right--float">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="Optimizing_For_Performance.html">Optimizing For Performance</a></h1>
                <span style="float: left; font-size: 10px; color: gray;">
            Tuesday, August 2, 2016 9:44 AM        </span>
                        <span style="float: right; font-size: 10px; color: gray;">
            <a href="https://github.com/Volicon/NestedReact/blob/develop/docs/04_Optimizing_For_Performance.md" target="_blank">Edit on GitHub</a>
        </span>
            </div>


    <div class="s-content">
        <h2 id="page_Performance_optimizations">Performance optimizations</h2>
<h3 id="page_Pure_Render">Pure Render</h3>
<h3 id="page_Transactional_data_updates">Transactional data updates</h3>
<h3 id="page_Local_UI_updates">Local UI updates</h3>
<h2 id="page_Old">Old</h2>
<h2 id="page_Props_specs_and_pure_render_optimization">Props specs and pure render optimization</h2>
<p>One of the problems of unidirectional data flow is that large part of UI is being
updated for every small change. Though React does its job avoiding unnecessary DOM manipulations,
it's still takes a lot of computation resources to compare new and old UI components trees.
<code>Pure render</code> optimization strategy avoids rendering and comparison of subtrees which has not been changed
by adding special <code>props</code> comparison function (<code>shouldComponentUpdate</code>). This optimization
is most effective on the top level close to the state holder component.</p>
<p>NestedReact support this optimization, comparing props model's and collection version tokens to ones used during the last render,
and comparing other props values for strict equality.</p>
<p>To enable this optimization for the particular component, you need to:</p>
<ul>
<li>Declare all props that will be tracked for changes in <code>props</code> (or <code>propTypes</code>) spec.
Which is the good practice by itself, so you encouraged to do it unless you're using
stateless function components syntax, which is preferable.</li>
<li>Add <code>pureRender : true</code> to component definition.</li>
</ul>
<p>As from previous example:</p>
<pre><code class="language-javscript">var Bottom = React.createClass({
    props : {
        model : Counter    
    },

    pureRender : true,
    
    render(){
        const { model } = this.props;
        return (
            &lt;div onClick={ () =&gt; model.count += 1 }&gt;
                { model.count }
            &lt;/div&gt;
        );
    )
});
</code></pre>
<p>NestedReact <code>props</code> spec uses the simple subset of <code>state</code> spec, and acts as substitution for <code>propTypes</code> (in fact,
it internally compiles itself to the <code>propTypes</code> and <code>getDefaultProps()</code>).</p>
<p>Following type annotations are allowed for <code>props</code>:</p>
<ol>
<li>Constructor functions: <code>prop1 : String</code>
</li>
<li>Constructors with default value: <code>prop2 : String.value( &quot;default string&quot; )</code>
</li>
<li>JSON and primitive values: <code>prop3 : &quot;default string&quot;</code>
</li>
<li>Special PropTypes cases:
<ul>
<li>
<code>PropTypes.any</code> -&gt; <code>undefined</code> (no default value) or <code>null</code> (with <code>null</code> default value)</li>
<li>
<code>PropTypes.node</code> -&gt; <code>React.Node</code>
</li>
<li>
<code>PropTypes.element</code> -&gt; <code>React.Element</code>
</li>
</ul>
</li>
</ol>
<p>If prop has explicitly declared default value, as in (2) or (3), it will be added to <code>getDefaultProps</code>.</p>
<h2 id="page_Partial_component_subtree_updates">Partial component subtree updates</h2>
<p>For the number of reasons, you may need some parts of components subtrees to listen for props updates independently.
It might be required if model or collection props are not the part of any upper component state.
This situation frequently happens during transition period when you're in the middle of refactoring large
backbone application.</p>
<p>To make <code>&lt;Bottom /&gt;</code> component listen to and update on its <code>model</code> prop change, it's enough to add
<code>listenToProps</code> option to component spec. It will play well with <code>pureRender</code>, effectively
avoiding unnecessary renders if top level component will trigger update on the same change too.</p>
<pre><code class="language-javscript">var Bottom = React.createClass({
    props : {
        model : Counter    
    },
    
    listenToProps : 'model', // space separated list of prop names
    
    // ...all other stays the same...
});
</code></pre>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="Working_With_Forms/Advanced Data Binding.html">Previous</a></li>            <li class=Pager--next><a href="Migration_from_Backbone.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    
    <!-- jQuery -->
    <script src="themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="themes/daux/js/daux.js"></script>

            <!-- Tipue Search -->
        <script type="text/javascript" src="tipuesearch/tipuesearch.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(function() {
                tipuesearch({
                    'base_url': ''
                });
            });
        </script>
    
</body>
</html>
