{"version":3,"file":"index.min.js","sources":["../lib/react-mvx/define/state.js","../lib/react-mvx/define/store.js","../lib/react-mvx/define/typeSpecs.js","../lib/react-mvx/define/context.js","../lib/react-mvx/define/pureRender.js","../lib/react-mvx/define/props.js","../lib/react-mvx/valuelink/helpers.js","../lib/react-mvx/link.js","../lib/react-mvx/component.js","../lib/component-view.js","../lib/createClass.js","../lib/index.js","../lib/react-mvx/valuelink/link.js","../lib/react-mvx/define/index.js","../lib/react-mvx/index.js","../lib/view-element.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/*****************\n * State\n */\nimport { define, Record, Store } from 'type-r';\nexport default function process(definition, BaseComponentClass) {\n    var prototype = this.prototype;\n    var state = definition.state, State = definition.State;\n    if (typeof state === 'function') {\n        State = state;\n        state = void 0;\n    }\n    if (state) {\n        var BaseClass = State || prototype.State || Record;\n        var ComponentState = (function (_super) {\n            __extends(ComponentState, _super);\n            function ComponentState() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            return ComponentState;\n        }(BaseClass));\n        ComponentState.attributes = state;\n        ComponentState = __decorate([\n            define\n        ], ComponentState);\n        prototype.State = ComponentState;\n    }\n    else if (State) {\n        prototype.State = State;\n    }\n    if (state || State) {\n        this.mixins.merge([StateMixin, UpdateOnNestedChangesMixin]);\n    }\n}\nexport var StateMixin = {\n    //state : null,\n    _initializeState: function () {\n        // props.__keepState is used to workaround issues in Backbone intergation layer\n        var state = this.state = this.props.__keepState || new this.State();\n        // Take ownership on state...\n        state._owner = this;\n        state._ownerKey = 'state';\n    },\n    context: {\n        _nestedStore: Store\n    },\n    // reference global store to fix model's store locator\n    getStore: function () {\n        // Attempt to get the store from the context first. Then - fallback to the state's default store.\n        // TBD: Need to figure out a good way of managing local stores.\n        var context, state;\n        return ((context = this.context) && context._nestedStore) ||\n            ((state = this.state) && state._defaultStore);\n    },\n    componentWillUnmount: function () {\n        var state = this.state;\n        state._owner = state._ownerKey = void 0;\n        this._preventDispose /* hack for component-view to preserve the state */ || state.dispose();\n        this.state = void 0;\n    }\n};\nexport var UpdateOnNestedChangesMixin = {\n    _onChildrenChange: function () { },\n    componentDidMount: function () {\n        this._onChildrenChange = this.asyncUpdate;\n    }\n};\n//# sourceMappingURL=state.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { define, Store } from 'type-r';\nimport { StateMixin, UpdateOnNestedChangesMixin } from './state';\nexport default function onDefine(definition, BaseClass) {\n    var store = definition.store, StoreClass = definition.Store;\n    if (store && store instanceof Store) {\n        // Direct reference to an existing store. Put it to the prototype.\n        this.prototype.store = store;\n        this.mixins.merge([ExternalStoreMixin, ExposeStoreMixin]);\n    }\n    else if (store || definition.Store) {\n        if (typeof store === 'function') {\n            StoreClass = store;\n            store = void 0;\n        }\n        if (store) {\n            var BaseClass_1 = StoreClass || this.prototype.Store || Store;\n            var InternalStore = (function (_super) {\n                __extends(InternalStore, _super);\n                function InternalStore() {\n                    return _super !== null && _super.apply(this, arguments) || this;\n                }\n                return InternalStore;\n            }(BaseClass_1));\n            InternalStore.attrbutes = store;\n            InternalStore = __decorate([\n                define\n            ], InternalStore);\n            ;\n            this.prototype.Store = InternalStore;\n        }\n        else if (StoreClass) {\n            this.prototype.Store = StoreClass;\n        }\n        this.mixins.merge([InternalStoreMixin, UpdateOnNestedChangesMixin, ExposeStoreMixin]);\n    }\n}\n/**\n * Attached whenever the store declaration of any form is present in the component.\n */\nvar ExposeStoreMixin = {\n    childContext: {\n        _nestedStore: Store\n    },\n    getChildContext: function () {\n        return { _nestedStore: this.store };\n    },\n    getStore: function () {\n        return this.store;\n    },\n    // Will be called by the store when the lookup will fail.\n    get: function (key) {\n        // Ask upper store.\n        var store = StateMixin.getStore.call(this, key);\n        return store && store.get(key);\n    }\n};\n/**\n * External store must just track the changes and trigger render.\n * TBD: don't use it yet.\n */\nvar ExternalStoreMixin = {\n    componentDidMount: function () {\n        // Start UI updates on state changes.\n        this.listenTo(this.store, 'change', this.asyncUpdate);\n    }\n};\nvar InternalStoreMixin = {\n    componentWillMount: function () {\n        var store = this.store = new this.Store();\n        store._owner = this;\n        store._ownerKey = 'store';\n    },\n    componentWillUnmount: function () {\n        this.store._ownerKey = this.store._owner = void 0;\n        this.store.dispose();\n        this.store = void 0;\n    }\n};\n//# sourceMappingURL=store.js.map","import * as PropTypes from 'prop-types';\nimport { Record } from 'type-r';\nexport function compileSpecs(props) {\n    var propTypes = {}, \n    // Create NestedTypes model definition to process props spec.\n    modelProto = Record.defaults(props).prototype;\n    var defaults, watchers, changeHandlers;\n    modelProto.forEachAttr(modelProto._attributes, function (spec, name) {\n        // Skip auto-generated `id` attribute.\n        if (name !== 'id') {\n            var value = spec.value, type = spec.type, options = spec.options;\n            // Translate props type to the propTypes guard.\n            propTypes[name] = translateType(type, options.isRequired);\n            if (options._onChange) {\n                watchers || (watchers = {});\n                watchers[name] = toLocalWatcher(options._onChange);\n            }\n            // Handle listening to event maps...\n            if (options.changeHandlers && options.changeHandlers.length) {\n                changeHandlers || (changeHandlers = {});\n                changeHandlers[name] = options.changeHandlers;\n            }\n            // Handle listening to props changes...\n            if (options.changeEvents) {\n                changeHandlers || (changeHandlers = {});\n                var handlers = changeHandlers[name] || (changeHandlers[name] = []), changeEvents_1 = typeof options.changeEvents === 'string' ? options.changeEvents : null;\n                handlers.push(function (next, prev, component) {\n                    prev && component.stopListening(prev);\n                    next && component.listenTo(next, changeEvents_1 || next._changeEventName, component.asyncUpdate);\n                });\n            }\n            // If default value is explicitly provided...\n            if (value !== void 0) {\n                //...append it to getDefaultProps function.\n                defaults || (defaults = {});\n                defaults[name] = spec.convert(value, void 0, null, {});\n            }\n        }\n    });\n    return { propTypes: propTypes, defaults: defaults, watchers: watchers, changeHandlers: changeHandlers };\n}\nfunction toLocalWatcher(ref) {\n    return typeof ref === 'function' ? ref : function (value, name) {\n        this[ref] && this[ref](value, name);\n    };\n}\nvar Node = (function () {\n    function Node() {\n    }\n    return Node;\n}());\nexport { Node };\nvar Element = (function () {\n    function Element() {\n    }\n    return Element;\n}());\nexport { Element };\nfunction translateType(Type, isRequired) {\n    var T = _translateType(Type);\n    return isRequired ? T.isRequired : T;\n}\nfunction _translateType(Type) {\n    switch (Type) {\n        case Number:\n        case Number.integer:\n            return PropTypes.number;\n        case String:\n            return PropTypes.string;\n        case Boolean:\n            return PropTypes.bool;\n        case Array:\n            return PropTypes.array;\n        case Function:\n            return PropTypes.func;\n        case Object:\n            return PropTypes.object;\n        case Node:\n            return PropTypes.node;\n        case Element:\n            return PropTypes.element;\n        case void 0:\n        case null:\n            return PropTypes.any;\n        default:\n            return PropTypes.instanceOf(Type);\n    }\n}\n//# sourceMappingURL=typeSpecs.js.map","import { compileSpecs } from './typeSpecs';\nimport { tools } from 'type-r';\nexport default function onDefine(_a, BaseClass) {\n    var context = _a.context, childContext = _a.childContext;\n    var prototype = this.prototype;\n    if (context) {\n        // Merge in inherited members...\n        prototype._context = tools.defaults(context, BaseClass.prototype._context || {});\n        // Compile to propTypes...\n        this.contextTypes = compileSpecs(context).propTypes;\n    }\n    if (childContext) {\n        prototype._childContext = tools.defaults(childContext, BaseClass.prototype._childContext);\n        this.childContextTypes = compileSpecs(childContext).propTypes;\n    }\n}\n//# sourceMappingURL=context.js.map","export function createChangeTokensConstructor(props) {\n    var propNames = Object.keys(props);\n    var PropsChangeTokens = new Function('p', 's', \"\\n        var v;\\n        this._s = s && s._changeToken;\\n        \" + propNames.map(function (name) { return \"\\n            this.\" + name + \" = ( ( v = p.\" + name + \") && v._changeToken ) || v;\\n        \"; }).join('') + \"\\n    \");\n    PropsChangeTokens.prototype._hasChanges = new Function('p', 's', \"\\n        var v;\\n        return ( ( s && s._changeToken ) !== this._s ) \" + propNames.map(function (name) { return \" ||\\n            this.\" + name + \" !== ( ( ( v = p.\" + name + \") && v._changeToken ) || v )\\n        \"; }).join('') + \";\\n    \");\n    return PropsChangeTokens;\n}\n;\nexport var EmptyPropsChangeTokensCtor = createChangeTokensConstructor({});\nexport var PureRenderMixin = {\n    shouldComponentUpdate: function (nextProps) {\n        return this._propsChangeTokens._hasChanges(nextProps);\n    },\n    componentDidMount: updateChangeTokens,\n    componentDidUpdate: updateChangeTokens\n};\nfunction updateChangeTokens() {\n    this._propsChangeTokens = new this.PropsChangeTokens(this.props, this.state);\n}\n//# sourceMappingURL=pureRender.js.map","/**\n * Handle props specification and everything which is related:\n * - local listening to props changes\n * - pure render mixin\n */\nimport { compileSpecs } from './typeSpecs';\nimport { PureRenderMixin, createChangeTokensConstructor } from './pureRender';\nimport { tools } from 'type-r';\nexport default function onDefine(_a, BaseClass) {\n    var props = _a.props, pureRender = _a.pureRender;\n    var prototype = this.prototype;\n    // process props spec...\n    if (props) {\n        // Merge with inherited members...\n        prototype._props = tools.defaults(props, BaseClass.prototype._props || {});\n        var _b = compileSpecs(props), propTypes = _b.propTypes, defaults = _b.defaults, watchers = _b.watchers, changeHandlers = _b.changeHandlers;\n        this.propTypes = propTypes;\n        if (defaults)\n            this.defaultProps = defaults;\n        if (watchers) {\n            prototype._watchers = watchers;\n            this.mixins.merge([WatchersMixin]);\n        }\n        if (changeHandlers) {\n            prototype._changeHandlers = changeHandlers;\n            this.mixins.merge([ChangeHandlersMixin]);\n        }\n        if (prototype.pureRender) {\n            prototype.PropsChangeTokens = createChangeTokensConstructor(props);\n        }\n    }\n    if (pureRender) {\n        this.mixins.merge([PureRenderMixin]);\n    }\n}\n/**\n * ChangeHandlers are fired in sequence upon props replacement.\n * Fires _after_ UI is updated. Used for managing events subscriptions.\n */\nvar ChangeHandlersMixin = {\n    componentDidMount: function () {\n        handlePropsChanges(this, {}, this.props);\n    },\n    componentDidUpdate: function (prev) {\n        handlePropsChanges(this, prev, this.props);\n    },\n    componentWillUnmount: function () {\n        handlePropsChanges(this, this.props, {});\n    }\n};\nfunction handlePropsChanges(component, prev, next) {\n    var _changeHandlers = component._changeHandlers;\n    for (var name_1 in _changeHandlers) {\n        if (prev[name_1] !== next[name_1]) {\n            for (var _i = 0, _a = _changeHandlers[name_1]; _i < _a.length; _i++) {\n                var handler = _a[_i];\n                handler(next[name_1], prev[name_1], component);\n            }\n        }\n    }\n}\n/**\n * Watchers works on props replacement and fires _before_ any change will be applied and UI is updated.\n * Fired in componentWillMount as well, which makes it a nice way to sync state from props.\n */\nvar WatchersMixin = {\n    componentWillReceiveProps: function (next) {\n        var _a = this, _watchers = _a._watchers, props = _a.props;\n        for (var name_2 in _watchers) {\n            if (next[name_2] !== props[name_2]) {\n                _watchers[name_2].call(this, next[name_2], name_2);\n            }\n        }\n    },\n    componentWillMount: function () {\n        var _a = this, _watchers = _a._watchers, props = _a.props;\n        for (var name_3 in _watchers) {\n            _watchers[name_3].call(this, props[name_3], name_3);\n        }\n    }\n};\n//# sourceMappingURL=props.js.map","var ArrayProto = Array.prototype, ObjectProto = Object.prototype;\nexport function helpers(value) {\n    if (value && typeof value === 'object') {\n        switch (Object.getPrototypeOf(value)) {\n            case ArrayProto: return arrayHelpers;\n            case ObjectProto: return objectHelpers;\n        }\n    }\n    return dummyHelpers;\n}\n// Do nothing for types other than Array and plain Object.\nvar dummyHelpers = {\n    clone: function (value) { return value; },\n    map: function (link, fun) { return []; },\n    remove: function (value) { return value; }\n};\n// `map` and `clone` for plain JS objects\nexport var objectHelpers = {\n    // Map through the link to object\n    map: function (link, iterator) {\n        var mapped = [];\n        for (var key in link.value) {\n            var element = iterator(link.at(key), key);\n            element === void 0 || (mapped.push(element));\n        }\n        return mapped;\n    },\n    remove: function (object, key) {\n        delete object[key];\n        return object;\n    },\n    // Shallow clone plain JS object\n    clone: function (object) {\n        var cloned = {};\n        for (var key in object) {\n            cloned[key] = object[key];\n        }\n        return cloned;\n    }\n};\n// `map` and `clone` helpers for arrays.\nexport var arrayHelpers = {\n    // Shallow clone array\n    clone: function (array) {\n        return array.slice();\n    },\n    remove: function (array, i) {\n        array.splice(i, 1);\n        return array;\n    },\n    // Map through the link to array\n    map: function (link, iterator) {\n        var length = link.value.length, mapped = Array(length);\n        for (var i = 0, j = 0; i < length; i++) {\n            var y = iterator(link.at(i), i);\n            y === void 0 || (mapped[j++] = y);\n        }\n        mapped.length === j || (mapped.length = j);\n        return mapped;\n    }\n};\n//# sourceMappingURL=helpers.js.map","/**\n * Import ValueLink library\n * Define value links binding mixins to the Record and Collection\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Mixable, MixinsState, Record } from 'type-r';\nimport { Link } from './valuelink/link';\nexport default Link;\nMixable.mixins.populate(Link);\n/**\n * Record\n */\nMixinsState.get(Record).merge([{\n        // Link to the record's attribute by its key.\n        linkAt: function (key) {\n            return cacheLink(getLinksCache(this), this, key);\n        },\n        // Link to the attribute of the record's tree by symbolic path.\n        linkPath: function (path, options) {\n            return new RecordDeepLink(this, path, options);\n        },\n        // Link all (or listed) attributes and return links cache.\n        linkAll: function () {\n            var links = getLinksCache(this);\n            if (arguments.length) {\n                for (var i = 0; i < arguments.length; i++) {\n                    cacheLink(links, this, arguments[i]);\n                }\n            }\n            else {\n                var attributes = this.attributes;\n                for (var key in attributes) {\n                    attributes[key] === void 0 || cacheLink(links, this, key);\n                }\n            }\n            return links;\n        }\n    }]);\n/**\n * Link to Type-R's record attribute.\n * Strict evaluation of value, lazy evaluation of validation error.\n * Links are cached in the records\n */\nvar RecordLink = (function (_super) {\n    __extends(RecordLink, _super);\n    function RecordLink(record, attr, value) {\n        var _this = _super.call(this, value) || this;\n        _this.record = record;\n        _this.attr = attr;\n        return _this;\n    }\n    RecordLink.prototype.set = function (x) {\n        this.record[this.attr] = x;\n    };\n    Object.defineProperty(RecordLink.prototype, \"error\", {\n        get: function () {\n            return this._error === void 0 ?\n                this.record.getValidationError(this.attr) :\n                this._error;\n        },\n        set: function (x) {\n            this._error = x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RecordLink;\n}(Link));\nvar RecordDeepLink = (function (_super) {\n    __extends(RecordDeepLink, _super);\n    function RecordDeepLink(record, path, options) {\n        var _this = _super.call(this, record.deepGet(path)) || this;\n        _this.record = record;\n        _this.path = path;\n        _this.options = options;\n        return _this;\n    }\n    Object.defineProperty(RecordDeepLink.prototype, \"error\", {\n        get: function () {\n            if (this._error === void 0) {\n                this._error = this.record.deepValidationError(this.path) || null;\n            }\n            return this._error;\n        },\n        set: function (x) {\n            this._error = x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RecordDeepLink.prototype, \"_changeToken\", {\n        get: function () {\n            return this.record._changeToken;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RecordDeepLink.prototype.set = function (x) {\n        this.record.deepSet(this.path, x, this.options);\n    };\n    return RecordDeepLink;\n}(Link));\nfunction getLinksCache(record) {\n    return record._links || (record._links = new record.AttributesCopy({}));\n}\nfunction cacheLink(links, record, key) {\n    var cached = links[key], value = record[key];\n    return cached && cached.value === value ? cached\n        : links[key] = new RecordLink(record, key, value);\n}\n/***********************************\n * Collection\n */\nMixinsState.get(Record.Collection).merge([{\n        // Boolean link to the record's presence in the collection\n        linkContains: function (record) {\n            return new CollectionLink(this, record);\n        },\n        // Link to collection's property\n        linkAt: function (prop) {\n            var _this = this;\n            return Link.value(this[prop], function (x) { return _this[prop] = x; });\n        }\n    }]);\n/**\n * Boolean link to presence of NestedType's record in collection.\n * Strict evaluation of value, no error.\n * Safe implementation of _changeToken.\n */\nvar CollectionLink = (function (_super) {\n    __extends(CollectionLink, _super);\n    function CollectionLink(collection, record) {\n        var _this = _super.call(this, Boolean(collection._byId[record.cid])) || this;\n        _this.collection = collection;\n        _this.record = record;\n        return _this;\n    }\n    CollectionLink.prototype.set = function (x) {\n        this.collection.toggle(this.record, x);\n    };\n    return CollectionLink;\n}(Link));\n//# sourceMappingURL=link.js.map","/**\n * React-Type-R component base class. Overrides React component.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as React from 'react';\nimport { mixinRules, define, mixins, definitions, Messenger } from 'type-r';\nimport onDefine, { EmptyPropsChangeTokensCtor } from './define';\nvar Component = (function (_super) {\n    __extends(Component, _super);\n    function Component(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this._initializeState();\n        return _this;\n    }\n    Component.prototype.linkAt = function (key) {\n        // Quick and dirty hack to suppres type error - refactor later.\n        return this.state.linkAt(key);\n    };\n    Component.prototype.linkAll = function () {\n        // Quick and dirty hack to suppres type error - refactor later.\n        var state = this.state;\n        return state.linkAll.apply(state, arguments);\n    };\n    Component.prototype.linkPath = function (path) {\n        return this.state.linkPath(path);\n    };\n    Object.defineProperty(Component.prototype, \"links\", {\n        get: function () {\n            return this.state._links;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Component.prototype._initializeState = function () {\n        this.state = null;\n    };\n    Component.prototype.assignToState = function (x, key) {\n        this.state.assignFrom((_a = {}, _a[key] = x, _a));\n        var _a;\n    };\n    Component.prototype.componentWillUnmount = function () {\n        this.dispose();\n    };\n    /**\n     * Performs transactional update for both props and state.\n     * Suppress updates during the transaction, and force update aftewards.\n     * Wrapping the sequence of changes in a transactions guarantees that\n     * React component will be updated _after_ all the changes to the\n     * both props and local state are applied.\n     */\n    Component.prototype.transaction = function (fun) {\n        var shouldComponentUpdate = this.shouldComponentUpdate, isRoot = shouldComponentUpdate !== returnFalse;\n        if (isRoot) {\n            this.shouldComponentUpdate = returnFalse;\n        }\n        var _a = this, state = _a.state, store = _a.store, withStore = store ? function (state) { return store.transaction(function () { return fun(state); }); } : fun;\n        state ? state.transaction(withStore) : withStore(state);\n        if (isRoot) {\n            this.shouldComponentUpdate = shouldComponentUpdate;\n            this.asyncUpdate();\n        }\n    };\n    // Safe version of the forceUpdate suitable for asynchronous callbacks.\n    Component.prototype.asyncUpdate = function () {\n        this.shouldComponentUpdate === returnFalse || this._disposed || this.forceUpdate();\n    };\n    return Component;\n}(React.Component));\nComponent.onDefine = onDefine;\nComponent = __decorate([\n    define({\n        PropsChangeTokens: EmptyPropsChangeTokensCtor\n    }),\n    definitions({\n        // Definitions to be extracted from mixins and statics and passed to `onDefine()`\n        state: mixinRules.merge,\n        State: mixinRules.value,\n        store: mixinRules.merge,\n        Store: mixinRules.value,\n        props: mixinRules.merge,\n        context: mixinRules.merge,\n        childContext: mixinRules.merge,\n        pureRender: mixinRules.protoValue\n    }),\n    mixinRules({\n        // Apply old-school React mixin rules.\n        componentWillMount: mixinRules.classLast,\n        componentDidMount: mixinRules.classLast,\n        componentWillReceiveProps: mixinRules.classLast,\n        componentWillUpdate: mixinRules.classLast,\n        componentDidUpdate: mixinRules.classLast,\n        componentWillUnmount: mixinRules.classFirst,\n        // And a bit more to fix inheritance quirks.\n        shouldComponentUpdate: mixinRules.some,\n        getChildContext: mixinRules.defaults\n    })\n    // Component can send and receive events...\n    ,\n    mixins(Messenger)\n], Component);\nexport { Component };\nfunction returnFalse() { return false; }\n// Looks like React guys _really_ want to deprecate it. But no way.\n// We will work around their attempt.\nObject.defineProperty(Component.prototype, 'isMounted', {\n    value: function isMounted() {\n        return !this._disposed;\n    }\n});\n//# sourceMappingURL=component.js.map","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { tools } from 'type-r';\nwindow.Page || (window.Page = { forceResize: function () { } });\nexport default function use(View) {\n    var dispose = View.prototype.dispose || function () { }, setElement = View.prototype.setElement;\n    var ComponentView = View.extend({\n        reactClass: null,\n        props: {},\n        element: null,\n        initialize: function (props) {\n            // memorise arguments to pass to React\n            this.options = props || {};\n        },\n        setElement: function () {\n            this.unmountComponent(true);\n            return setElement.apply(this, arguments);\n        },\n        // cached instance of react component...\n        component: null,\n        prevState: null,\n        resize: function () {\n            window.Page.forceResize();\n        },\n        render: function () {\n            var options = this.prevState ? tools.fastAssign({ __keepState: this.prevState }, this.options) : this.options, element = React.createElement(this.reactClass, options), component = ReactDOM.render(element, this.el);\n            this.component || this.mountComponent(component);\n        },\n        mountComponent: function (component) {\n            this.component = component;\n            this.prevState = null;\n            component.trigger && this.listenTo(component, 'all', function () {\n                this.trigger.apply(this, arguments);\n            });\n        },\n        unmountComponent: function (keepModel) {\n            var component = this.component;\n            if (component) {\n                this.prevState = component.state;\n                if (component.trigger) {\n                    this.stopListening(component);\n                }\n                component._preventDispose = Boolean(keepModel);\n                ReactDOM.unmountComponentAtNode(this.el);\n                this.component = null;\n            }\n        },\n        dispose: function () {\n            this.unmountComponent();\n            return dispose.apply(this, arguments);\n        }\n    });\n    Object.defineProperty(ComponentView.prototype, 'model', {\n        get: function () {\n            this.component || this.render();\n            return this.component && this.component.state;\n        }\n    });\n    return ComponentView;\n}\n//# sourceMappingURL=component-view.js.map","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport { Component } from './react-mvx';\nvar dontAutobind = [\n    'State', 'Store', 'constructor',\n    'componentWillMount', 'componentDidMount', 'componentWillReceiveProps', 'shouldComponentUpdate',\n    'componentWillUpdate', 'componentDidUpdate', 'componentWillUnmount',\n    'render', 'getDefaultProps', 'getChildContext'\n];\n/**\n * ES5 components definition factory\n */\nexport default function createClass(_a) {\n    var statics = _a.statics, a_spec = __rest(_a, [\"statics\"]);\n    // Gather all methods to pin them to `this` later.\n    var methods = [];\n    var Subclass = Component.extend(__assign({ \n        // Override constructor to autobind all the methods...\n        constructor: function () {\n            Component.apply(this, arguments);\n            for (var _i = 0, methods_1 = methods; _i < methods_1.length; _i++) {\n                var method = methods_1[_i];\n                this[method] = this[method].bind(this);\n            }\n        } }, a_spec), statics);\n    // Need to bind methods from mixins as well, so populate it here.\n    var Proto = Subclass.prototype;\n    for (var key in Proto) {\n        if (Proto.hasOwnProperty(key) && dontAutobind.indexOf(key) === -1 && typeof Proto[key] === 'function') {\n            methods.push(key);\n        }\n    }\n    return Subclass;\n}\n//# sourceMappingURL=createClass.js.map","// Re-export react-mvx\nimport ReactMVx from './react-mvx';\nvar NestedReact = Object.create(ReactMVx);\nexport default NestedReact;\nexport * from './react-mvx';\n// NestedReact backward compatibility layer\nimport * as ReactDOM from 'react-dom';\nimport Nested, { View, Record } from 'type-r';\nimport * as PropTypes from 'prop-types';\nimport subview from './view-element';\nNestedReact.subview = subview;\nexport { subview };\nconsole.log(\"ReactDOM=\", ReactDOM);\nimport use from './component-view';\nimport createClass from './createClass';\nNestedReact.createClass = createClass;\nObject.defineProperty(NestedReact, 'PropTypes', { value: PropTypes });\nexport { PropTypes, createClass };\nvar BaseView;\n// export hook to override base View class used...\nexport function useView(View) {\n    BaseView = use(View);\n}\nvar onDefine = NestedReact.Component.onDefine;\nNestedReact.Component.onDefine = function (definitions, BaseClass) {\n    this.View = BaseView.extend({ reactClass: this });\n    return onDefine.call(this, definitions, BaseClass);\n};\n// Deprecated API for backward compatibility\nvar RecordProto = Record.prototype;\nRecordProto.getLink = RecordProto.linkAt;\nRecordProto.deepLink = RecordProto.linkPath;\nvar CollectionProto = Record.Collection.prototype;\nCollectionProto.hasLink = CollectionProto.linkContains;\nuseView(View);\n// Extend react components to have backbone-style jquery accessors\nvar BackboneViewProps = {\n    el: { get: function () { return ReactDOM.findDOMNode(this); } },\n    $el: { get: function () { return Nested.$(this.el); } },\n    $: { value: function (sel) { return this.$el.find(sel); } }\n};\nObject.defineProperties(NestedReact.Component.prototype, BackboneViewProps);\n//# sourceMappingURL=index.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Advanced React links for purely functional two-way data binding\n *\n * MIT License, (c) 2016 Vlad Balin, Volicon.\n */\nimport { helpers, arrayHelpers } from './helpers';\n// Main Link class. All links must extend it.\nvar Link = (function () {\n    // create \n    function Link(value) {\n        this.value = value;\n    }\n    // Create custom link to arbitrary value\n    Link.value = function (value, set) {\n        return new CustomLink(value, set);\n    };\n    Object.defineProperty(Link.prototype, \"validationError\", {\n        // DEPRECATED: Old error holder for backward compatibility with Volicon code base\n        get: function () { return this.error; },\n        enumerable: true,\n        configurable: true\n    });\n    Link.prototype.onChange = function (handler) {\n        var _this = this;\n        return new CloneLink(this, function (x) {\n            handler(x);\n            _this.set(x);\n        });\n    };\n    Object.defineProperty(Link.prototype, \"props\", {\n        // <input { ...link.props } />\n        get: function () {\n            var _this = this;\n            return typeof this.value === 'boolean' ? {\n                checked: this.value,\n                onChange: function (e) { return _this.set(Boolean(e.target.checked)); }\n            } : {\n                value: this.value,\n                onChange: function (e) { return _this.set(e.target.value); }\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // DEPRECATED: Old React method for backward compatibility\n    Link.prototype.requestChange = function (x) {\n        this.set(x);\n    };\n    // Immediately update the link value using given transform function.\n    Link.prototype.update = function (transform, e) {\n        var next = transform(this.clone(), e);\n        next === void 0 || this.set(next);\n    };\n    // Create new link which applies transform function on set.\n    Link.prototype.pipe = function (handler) {\n        var _this = this;\n        return new CloneLink(this, function (x) {\n            var next = handler(x, _this.value);\n            next === void 0 || _this.set(next);\n        });\n    };\n    // Create UI event handler function which will update the link with a given transform function.\n    Link.prototype.action = function (transform) {\n        var _this = this;\n        return function (e) { return _this.update(transform, e); };\n    };\n    Link.prototype.equals = function (truthyValue) {\n        return new EqualsLink(this, truthyValue);\n    };\n    Link.prototype.enabled = function (defaultValue) {\n        return new EnabledLink(this, defaultValue || \"\");\n    };\n    // Array-only links methods\n    Link.prototype.contains = function (element) {\n        return new ContainsLink(this, element);\n    };\n    Link.prototype.push = function () {\n        var array = arrayHelpers.clone(this.value);\n        Array.prototype.push.apply(array, arguments);\n        this.set(array);\n    };\n    Link.prototype.unshift = function () {\n        var array = arrayHelpers.clone(this.value);\n        Array.prototype.unshift.apply(array, arguments);\n        this.set(array);\n    };\n    Link.prototype.splice = function () {\n        var array = arrayHelpers.clone(this.value);\n        Array.prototype.splice.apply(array, arguments);\n        this.set(array);\n    };\n    Link.prototype.map = function (iterator) {\n        return helpers(this.value).map(this, iterator);\n    };\n    Link.prototype.removeAt = function (key) {\n        var value = this.value, _ = helpers(value);\n        this.set(_.remove(_.clone(value), key));\n    };\n    Link.prototype.at = function (key) {\n        return new LinkAt(this, key);\n    };\n    Link.prototype.clone = function () {\n        var value = this.value;\n        return helpers(value).clone(value);\n    };\n    Link.prototype.pick = function () {\n        var links = {};\n        for (var i = 0; i < arguments.length; i++) {\n            var key = arguments[i];\n            links[key] = new LinkAt(this, key);\n        }\n        return links;\n    };\n    /**\n     * Validate link with validness predicate and optional custom error object. Can be chained.\n     */\n    Link.prototype.check = function (whenValid, error) {\n        if (!this.error && !whenValid(this.value)) {\n            this.error = error || whenValid.error || defaultError;\n        }\n        return this;\n    };\n    return Link;\n}());\nexport { Link };\nvar CustomLink = (function (_super) {\n    __extends(CustomLink, _super);\n    function CustomLink(value, set) {\n        var _this = _super.call(this, value) || this;\n        _this.set = set;\n        return _this;\n    }\n    CustomLink.prototype.set = function (x) { };\n    return CustomLink;\n}(Link));\nexport { CustomLink };\nvar CloneLink = (function (_super) {\n    __extends(CloneLink, _super);\n    function CloneLink(parent, set) {\n        var _this = _super.call(this, parent.value) || this;\n        _this.set = set;\n        var error = parent.error;\n        if (error)\n            _this.error = error;\n        return _this;\n    }\n    CloneLink.prototype.set = function (x) { };\n    return CloneLink;\n}(Link));\nexport { CloneLink };\nvar EqualsLink = (function (_super) {\n    __extends(EqualsLink, _super);\n    function EqualsLink(parent, truthyValue) {\n        var _this = _super.call(this, parent.value === truthyValue) || this;\n        _this.parent = parent;\n        _this.truthyValue = truthyValue;\n        return _this;\n    }\n    EqualsLink.prototype.set = function (x) {\n        this.parent.set(x ? this.truthyValue : null);\n    };\n    return EqualsLink;\n}(Link));\nexport { EqualsLink };\nvar EnabledLink = (function (_super) {\n    __extends(EnabledLink, _super);\n    function EnabledLink(parent, defaultValue) {\n        var _this = _super.call(this, parent.value != null) || this;\n        _this.parent = parent;\n        _this.defaultValue = defaultValue;\n        return _this;\n    }\n    EnabledLink.prototype.set = function (x) {\n        this.parent.set(x ? this.defaultValue : null);\n    };\n    return EnabledLink;\n}(Link));\nexport { EnabledLink };\nvar ContainsLink = (function (_super) {\n    __extends(ContainsLink, _super);\n    function ContainsLink(parent, element) {\n        var _this = _super.call(this, parent.value.indexOf(element) >= 0) || this;\n        _this.parent = parent;\n        _this.element = element;\n        return _this;\n    }\n    ContainsLink.prototype.set = function (x) {\n        var _this = this;\n        var next = Boolean(x);\n        if (this.value !== next) {\n            var arr = this.parent.value, nextValue = x ? arr.concat(this.element) : arr.filter(function (el) { return el !== _this.element; });\n            this.parent.set(nextValue);\n        }\n    };\n    return ContainsLink;\n}(Link));\nexport { ContainsLink };\nvar defaultError = 'Invalid value';\n/**\n * Link to array or object element enclosed in parent link.\n * Performs purely functional update of the parent, shallow copying its value on `set`.\n */\nvar LinkAt = (function (_super) {\n    __extends(LinkAt, _super);\n    function LinkAt(parent, key) {\n        var _this = _super.call(this, parent.value[key]) || this;\n        _this.parent = parent;\n        _this.key = key;\n        return _this;\n    }\n    LinkAt.prototype.remove = function () {\n        this.parent.removeAt(this.key);\n    };\n    // Set new element value to parent array or object, performing purely functional update.\n    LinkAt.prototype.set = function (x) {\n        var _this = this;\n        if (this.value !== x) {\n            this.parent.update(function (value) {\n                value[_this.key] = x;\n                return value;\n            });\n        }\n    };\n    ;\n    return LinkAt;\n}(Link));\nexport { LinkAt };\n//# sourceMappingURL=link.js.map","import { Messenger } from 'type-r';\nimport onDefineStore from './store';\nimport onDefineState from './state';\nimport onDefineContext from './context';\nimport onDefineProps from './props';\nexport default function onDefine(definition, BaseClass) {\n    // Initialize mixins placeholder...\n    onDefineStore.call(this, definition, BaseClass);\n    onDefineState.call(this, definition, BaseClass);\n    onDefineContext.call(this, definition, BaseClass);\n    onDefineProps.call(this, definition, BaseClass);\n    Messenger.onDefine.call(this, definition, BaseClass);\n}\n;\nexport { Node, Element } from './typeSpecs';\nexport { EmptyPropsChangeTokensCtor } from './pureRender';\n//# sourceMappingURL=index.js.map","import * as React from 'react';\nimport { define, mixins } from 'type-r';\nimport { Node, Element } from './define';\nimport Link from './link';\nimport { Component } from './component';\n// extend React namespace\nvar ReactMVx = Object.create(React);\n// Make it compatible with ES6 module format.\nReactMVx.default = ReactMVx;\n// listenToProps, listenToState, model, attributes, Model\nReactMVx.define = define;\nReactMVx.mixins = mixins;\nReactMVx.Node = Node.value(null);\nReactMVx.Element = Element.value(null);\nReactMVx.Link = Link;\nReactMVx.Component = Component;\nvar assignToState = ReactMVx.assignToState = function (key) {\n    return function (prop) {\n        this.state.assignFrom((_a = {}, _a[key] = prop && prop instanceof Link ? prop.value : prop, _a));\n        var _a;\n    };\n};\nexport default ReactMVx;\nexport { define, mixins, Node, Element, Link, Component, assignToState };\n//# sourceMappingURL=index.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { Component } from './react-mvx';\nimport { tools } from 'type-r';\nvar notEqual = tools.notEqual;\nvar BackboneView = (function (_super) {\n    __extends(BackboneView, _super);\n    function BackboneView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.saveRef = function (element) {\n            _this.root = element;\n        };\n        return _this;\n    }\n    BackboneView.prototype.shouldComponentUpdate = function (next) {\n        var props = this.props;\n        return next.View !== props.View || notEqual(next.options, props.options);\n    };\n    BackboneView.prototype.hasUnsavedChanges = function () {\n        var view = this.view;\n        return view && (typeof view.hasUnsavedChanges === 'function' ? view.hasUnsavedChanges() : view.hasUnsavedChanges);\n    };\n    BackboneView.prototype.render = function () {\n        return React.createElement('div', {\n            ref: this.saveRef,\n            className: this.props.className\n        });\n    };\n    BackboneView.prototype.componentDidMount = function () {\n        this._mountView();\n    };\n    BackboneView.prototype.componentDidUpdate = function () {\n        this._dispose();\n        this._mountView();\n    };\n    BackboneView.prototype.componentWillUnmount = function () {\n        this._dispose();\n    };\n    BackboneView.prototype._mountView = function () {\n        var el = this.root, p = this.props;\n        var view = this.view = p.options ? new p.View(p.options) : new p.View();\n        el.appendChild(view.el);\n        view.render();\n    };\n    BackboneView.prototype._dispose = function () {\n        var view = this.view;\n        if (view) {\n            if (view.dispose) {\n                view.dispose();\n            }\n            else {\n                view.stopListening();\n                view.off();\n            }\n            this.root.innerHTML = \"\";\n            this.view = null;\n        }\n    };\n    return BackboneView;\n}(Component));\nexport default BackboneView;\n//# sourceMappingURL=view-element.js.map"],"names":["process","definition","BaseComponentClass","prototype","this","state","State","ComponentState","_super","apply","arguments","__extends","Record","attributes","__decorate","define","mixins","merge","StateMixin","UpdateOnNestedChangesMixin","onDefine","BaseClass","store","StoreClass","Store","ExternalStoreMixin","ExposeStoreMixin","InternalStore","attrbutes","InternalStoreMixin","compileSpecs","props","defaults","watchers","changeHandlers","propTypes","modelProto","forEachAttr","_attributes","spec","name","value","type","options","translateType","isRequired","_onChange","toLocalWatcher","length","changeEvents","handlers","changeEvents_1","push","next","prev","component","stopListening","listenTo","_changeEventName","asyncUpdate","convert","ref","Type","T","_translateType","Number","integer","PropTypes.number","String","PropTypes.string","Boolean","PropTypes.bool","Array","PropTypes.array","Function","PropTypes.func","Object","PropTypes.object","Node","PropTypes.node","Element","PropTypes.element","PropTypes.any","PropTypes.instanceOf","_a","context","childContext","_context","tools","contextTypes","_childContext","childContextTypes","createChangeTokensConstructor","propNames","keys","PropsChangeTokens","map","join","_hasChanges","updateChangeTokens","_propsChangeTokens","pureRender","_props","_b","defaultProps","_watchers","WatchersMixin","_changeHandlers","ChangeHandlersMixin","PureRenderMixin","handlePropsChanges","name_1","_i","handler","helpers","getPrototypeOf","ArrayProto","arrayHelpers","ObjectProto","objectHelpers","dummyHelpers","getLinksCache","record","_links","AttributesCopy","cacheLink","links","key","cached","RecordLink","returnFalse","use","View","dispose","setElement","ComponentView","extend","reactClass","element","initialize","unmountComponent","prevState","resize","window","Page","forceResize","render","fastAssign","__keepState","React.createElement","ReactDOM.render","el","mountComponent","trigger","keepModel","_preventDispose","ReactDOM.unmountComponentAtNode","defineProperty","get","createClass","statics","a_spec","__rest","methods","Subclass","Component","__assign","constructor","methods_1","method","bind","Proto","hasOwnProperty","dontAutobind","indexOf","useView","BaseView","extendStatics","setPrototypeOf","__proto__","d","b","p","__","create","decorators","target","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","i","_initializeState","_owner","_ownerKey","_nestedStore","getStore","_defaultStore","componentWillUnmount","_onChildrenChange","componentDidMount","getChildContext","call","componentWillMount","EmptyPropsChangeTokensCtor","shouldComponentUpdate","nextProps","componentDidUpdate","componentWillReceiveProps","name_2","name_3","clone","link","fun","remove","iterator","mapped","at","object","cloned","array","slice","splice","j","y","Link","set","CustomLink","error","enumerable","configurable","onChange","_this","CloneLink","x","checked","e","requestChange","update","transform","pipe","action","equals","truthyValue","EqualsLink","enabled","defaultValue","EnabledLink","contains","ContainsLink","unshift","removeAt","_","LinkAt","pick","check","whenValid","defaultError","parent","arr","nextValue","concat","filter","Nested","populate","MixinsState","linkAt","linkPath","path","RecordDeepLink","linkAll","attr","_error","getValidationError","deepGet","deepValidationError","_changeToken","deepSet","Collection","linkContains","CollectionLink","prop","collection","_byId","cid","toggle","exports","assignToState","assignFrom","transaction","isRoot","withStore","_disposed","forceUpdate","React.Component","onDefineStore","onDefineState","onDefineContext","onDefineProps","Messenger","definitions","mixinRules","protoValue","classLast","componentWillUpdate","classFirst","some","ReactMVx","React","default","notEqual","BackboneView","saveRef","root","hasUnsavedChanges","view","createElement","className","_mountView","_dispose","appendChild","off","innerHTML","assign","t","s","n","getOwnPropertySymbols","NestedReact","subview","console","log","ReactDOM","PropTypes","RecordProto","getLink","deepLink","CollectionProto","hasLink","BackboneViewProps","ReactDOM.findDOMNode","$el","$","sel","find","defineProperties"],"mappings":"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"}